<!doctype html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Sample Select</title>
    <base href="/">
    <link rel="stylesheet" href="/assets/lib/fontawesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/assets/lib/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="/assets/lib/tantalim-client/public/css/common.css">
</head>
<body ng-app="tantalim.desktop" data-ng-controller="PageController">
<section class="container">
    <tnt-section id="BuildTable" current="SmartPage.getSection('BuildTable', 0)">
        <div class="page-header">
            <h1>Build Table</h1>
        </div>
        <tnt-table>

        </tnt-table>
        <tnt-form>
            <tnt-form-navigation>

            </tnt-form-navigation>
            <tnt-textbox label="Table Name"
                        current-instance="SmartPage.getSection('BuildTable', 0).getCurrentSet().getInstance()"
                        name="TableName" placeholder="Enter a table name" help="Enter the name of the table"
                        required="true">
            </tnt-textbox>
        </tnt-form>

        <tnt-section id="ChildSection1" title="Child Section" current="SmartPage.getSection('BuildTable', 0)">
            <title>Title2</title>
            <tnt-form>
                <tnt-form-navigation>

                </tnt-form-navigation>
                <tnt-textbox label="Table Name"
                             current-instance="SmartPage.getSection('BuildTable', 0).getCurrentSet().getInstance()"
                             name="TableName" placeholder="Enter a table name" help="Enter the name of the table"
                             required="true">
                </tnt-textbox>
            </tnt-form>
        </tnt-section>

    </tnt-section>
</section>

<div id="3rd_party_scripts">
    <!-- Bootstrap JS -->
    <script type="text/javascript" src="/assets/lib/jquery/dist/jquery.js"></script>
    <script type="text/javascript" src="/assets/lib/bootstrap/dist/js/bootstrap.js"></script>
    <!-- Angular JS -->
    <script type="text/javascript" src="/assets/lib/angular/angular.js"></script>
    <!-- Angular UI -->
    <script type="text/javascript" src="/assets/lib/angular-bootstrap/ui-bootstrap.js"></script>
    <script type="text/javascript" src="/assets/lib/angular-bootstrap/ui-bootstrap-tpls.js"></script>

    <script type="text/javascript" src="/assets/lib/angular-ui-utils/ui-utils.js"></script>

    <!-- Other JS -->
    <script type="text/javascript" src="/assets/lib/lodash/lodash.js"></script>
</div>
<script type="text/javascript">
    angular.module('tantalim.desktop', []);

    angular.module('tantalim.desktop')
            .controller('PageController',
            function ($scope) {

                var SmartNodeInstance = function (model, row) {
                    var self = {
                        id: row.id,
                        data: row.data,
                        getValue: function (fieldName) {
                            return self.data[fieldName];
                        },
                        update: function (fieldName, newValue) {
                            self.data[fieldName] = newValue;
                            self.state = 'UPDATED';
                        },
                        state: 'NO_CHANGE'
                    };
                    return self;
                };

                $scope.row = new SmartNodeInstance({}, {
                    id: 1,
                    data: {
                        Name: 'John',
                        Title: null
                    }
                });
            });
    angular.module('tantalim.desktop')
            .factory('PageService', function () {
                return {
                    readModelData: function (sourceModel, filter) {
                        var rows = [];
                        switch (sourceModel) {
                            case 'People':
                                rows = [{
                                    id: 1,
                                    data: {
                                        PersonName: 'John',
                                        Title: 'Programmer'
                                    }
                                }, {
                                    id: 2,
                                    data: {
                                        PersonName: 'William',
                                        Title: 'Manager'
                                    }
                                }];
                                break;
                            case 'Titles':
                                rows = [{
                                    id: 1,
                                    data: {
                                        TitleName: 'Programmer'
                                    }
                                }, {
                                    id: 2,
                                    data: {
                                        TitleName: 'Manager'
                                    }
                                }];
                                break;
                            case 'StateProvince':
                                console.info(filter);
                                rows = [{
                                    id: 'AL',
                                    data: {
                                        ProvinceName: 'Alabama'
                                    }
                                }, {
                                    id: 'AK',
                                    data: {
                                        ProvinceName: 'Alaska'
                                    }
                                }];
                                break;
                            default:
                                rows = [];
                        }
                        return {
                            then: function (callback) {
                                callback({
                                    status: 200,
                                    data: {
                                        rows: rows
                                    }
                                });
                            }
                        };
                    }
                };
            });

</script>
<script type="text/javascript" src="/assets/lib/tantalim-client/public/js/tantalim.page.ui.js"></script>
</body>
</html>
